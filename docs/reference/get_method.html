<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Get information about ggproto methods — get_method • ggtrace</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Atkinson_Hyperlegible-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Get information about ggproto methods — get_method"><meta name="description" content="Get information about ggproto methods"><meta property="og:description" content="Get information about ggproto methods"><meta property="og:image" content="https://yjunechoe.github.io/ggtrace/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ggtrace</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.7.7</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="external-link nav-link" href="https://yjunechoe.github.io/static/papers/Choe_2022_SublayerGG.pdf">Paper</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Usage</h6></li>
    <li><a class="dropdown-item" href="../articles/examples-gallery.html">Examples gallery</a></li>
    <li><a class="dropdown-item" href="../articles/workflow-functions.html">Workflow functions</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Design</h6></li>
    <li><a class="dropdown-item" href="../articles/pedagogical-philosophy.html">Pedagogical Philosophy</a></li>
    <li><a class="dropdown-item" href="../articles/extending-trace.html">Extending trace()</a></li>
    <li><a class="dropdown-item" href="../articles/FAQ.html">Frequently asked questions</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/yjunechoe/ggtrace/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Get information about ggproto methods</h1>
      <small class="dont-index">Source: <a href="https://github.com/yjunechoe/ggtrace/blob/HEAD/R/get_method.R" class="external-link"><code>R/get_method.R</code></a></small>
      <div class="d-none name"><code>get_method.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Get information about ggproto methods</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">get_method</span><span class="op">(</span><span class="va">method</span>, inherit <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">get_method_inheritance</span><span class="op">(</span><span class="va">obj</span>, trim_overriden <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">ggbody</span><span class="op">(</span><span class="va">method</span>, inherit <span class="op">=</span> <span class="cn">FALSE</span>, as.list <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">ggformals</span><span class="op">(</span><span class="va">method</span>, inherit <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>A function or a ggproto method.
The ggproto method may be specified using any of the following forms:</p><ul><li><p><code>ggproto$method</code></p></li>
<li><p><code>namespace::ggproto$method</code></p></li>
<li><p><code>namespace:::ggproto$method</code></p></li>
</ul></dd>


<dt id="arg-inherit">inherit<a class="anchor" aria-label="anchor" href="#arg-inherit"></a></dt>
<dd><p>Whether the method should be searched from its closest parent. Defaults to <code>FALSE</code>.
If <code>TRUE</code>, returns the parent's method and the corresponding <code>ggbody()</code> code as a message.</p></dd>


<dt id="arg-obj">obj<a class="anchor" aria-label="anchor" href="#arg-obj"></a></dt>
<dd><p>A ggproto object</p></dd>


<dt id="arg-trim-overriden">trim_overriden<a class="anchor" aria-label="anchor" href="#arg-trim-overriden"></a></dt>
<dd><p>Whether <code>get_method_inheritance</code> should recursively hide methods defined by a parent.</p></dd>


<dt id="arg-as-list">as.list<a class="anchor" aria-label="anchor" href="#arg-as-list"></a></dt>
<dd><p>Whether <code>ggbody()</code> should return the body of the method as a list. Defaults to <code>TRUE</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>

<ul><li><p><code>get_method()</code> returns the method.</p></li>
<li><p><code>get_method_inheritance()</code> lists available methods from self and parent ggprotos.</p></li>
<li><p><code>ggbody()</code> returns the body of the method.</p></li>
<li><p><code>ggformals()</code> returns the formals of the method.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p><code>get_method()</code> calls <code>get("method", ggproto)</code> under the hood.
The <code>get("method", ggproto)</code> syntax is the long form of <code>ggproto$method</code> which retrieves
the actual function body. This is a subtle but important difference for inspecting ggproto methods.</p><ul><li><p>For example, this works: <code>debugonce(get("compute_group", StatCount))</code></p></li>
<li><p>But this fails to insert a break point: <code>debugonce(StatCount$compute_group)</code></p></li>
</ul><p><code>get_method()</code> was designed so that you do not have to worry about this distinction.</p>
    </div>
    <div class="section level2">
    <h2 id="gotchas">Gotchas<a class="anchor" aria-label="anchor" href="#gotchas"></a></h2>


<ul><li><p>If a method is being traced via <code><a href="ggtrace.html">ggtrace()</a></code> or <code><a href="ggedit.html">ggedit()</a></code>, <code>get_method()</code> will return the current <em>modified state</em>
of the method. As of v0.3.5, calling <code>get_method()</code> on a method that has a trace on it will return a warning
to emphasize this fact.</p></li>
<li><p>When using <code>inherit = TRUE</code>, make sure that all ggproto objects from <code>class(ggproto)</code> are available (by loading
the packages where they are defined, for example). Under the hood, <code>get_method()</code> loops through the parents
to search for the method, so it needs to be able to evaluate each element of <code>class(ggproto)</code> as an object.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Uninformative</span></span></span>
<span class="r-in"><span><span class="va">StatCount</span><span class="op">$</span><span class="va">compute_group</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;ggproto method&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   &lt;Wrapper function&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     function (...) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> compute_group(..., self = self)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   &lt;Inner function (f)&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     function (self, data, scales, width = NULL, flipped_aes = FALSE) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     data &lt;- flip_data(data, flipped_aes)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     x &lt;- data$x</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     weight &lt;- data$weight %||% rep(1, length(x))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     count &lt;- as.vector(rowsum(weight, x, na.rm = TRUE))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     bars &lt;- data_frame0(count = count, prop = count/sum(abs(count)), </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         x = sort(unique0(x)), width = width, flipped_aes = flipped_aes, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         .size = length(count))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     flip_data(bars, flipped_aes)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> }</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/formals.html" class="external-link">formals</a></span><span class="op">(</span><span class="va">StatCount</span><span class="op">$</span><span class="va">compute_group</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/body.html" class="external-link">body</a></span><span class="op">(</span><span class="va">StatCount</span><span class="op">$</span><span class="va">compute_group</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> compute_group(..., self = self)</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Errors</span></span></span>
<span class="r-in"><span><span class="co"># get(StatCount$compute_group)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Informative</span></span></span>
<span class="r-in"><span><span class="fu">get_method</span><span class="op">(</span><span class="va">StatCount</span><span class="op">$</span><span class="va">compute_group</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> function (self, data, scales, width = NULL, flipped_aes = FALSE) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     data &lt;- flip_data(data, flipped_aes)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     x &lt;- data$x</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     weight &lt;- data$weight %||% rep(1, length(x))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     count &lt;- as.vector(rowsum(weight, x, na.rm = TRUE))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     bars &lt;- data_frame0(count = count, prop = count/sum(abs(count)), </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         x = sort(unique0(x)), width = width, flipped_aes = flipped_aes, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         .size = length(count))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     flip_data(bars, flipped_aes)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;bytecode: 0x000001d4b5062188&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;environment: namespace:ggplot2&gt;</span>
<span class="r-in"><span><span class="fu">ggformals</span><span class="op">(</span><span class="va">StatCount</span><span class="op">$</span><span class="va">compute_group</span><span class="op">)</span> <span class="co"># formals(get_method(StatCount$compute_group))</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $self</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $data</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $scales</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $width</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NULL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $flipped_aes</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="fu">ggbody</span><span class="op">(</span><span class="va">StatCount</span><span class="op">$</span><span class="va">compute_group</span><span class="op">)</span>    <span class="co"># body(get_method(StatCount$compute_group))</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> `{`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[2]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> data &lt;- flip_data(data, flipped_aes)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[3]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> x &lt;- data$x</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[4]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> weight &lt;- data$weight %||% rep(1, length(x))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[5]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> count &lt;- as.vector(rowsum(weight, x, na.rm = TRUE))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[6]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> bars &lt;- data_frame0(count = count, prop = count/sum(abs(count)), </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     x = sort(unique0(x)), width = width, flipped_aes = flipped_aes, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     .size = length(count))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[7]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> flip_data(bars, flipped_aes)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Works for ggproto in extension packages</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">ggbody</span><span class="op">(</span><span class="fu">ggforce</span><span class="fu">::</span><span class="va"><a href="https://ggforce.data-imaginist.com/reference/ggforce-extensions.html" class="external-link">StatDelaunaySegment</a></span><span class="op">$</span><span class="va">compute_group</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> `{`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[2]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> if (any(duplicated(data[, c("x", "y")]))) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     cli::cli_warn("{.fn {snake_class(self)}} is dropping duplicated points")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[3]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> if (normalize) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     x_range &lt;- range(data$x, na.rm = TRUE, finite = TRUE)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     y_range &lt;- range(data$y, na.rm = TRUE, finite = TRUE)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     data$x &lt;- rescale(data$x, from = x_range) * asp.ratio</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     data$y &lt;- rescale(data$y, from = y_range)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     if (!is.null(bound)) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         bound[1:2] &lt;- rescale(bound[1:2], from = x_range) * asp.ratio</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         bound[3:4] &lt;- rescale(bound[3:4], from = x_range)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[4]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> vor &lt;- deldir::deldir(data$x, data$y, rw = bound, eps = eps, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     suppressMsge = TRUE)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[5]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> segments &lt;- vor$delsgs[, 1:5]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[6]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> names(segments) &lt;- c("x", "y", "xend", "yend", "group")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[7]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> segments$group &lt;- vor$ind.orig[segments$group]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[8]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> data &lt;- cbind(segments[, 1:4], data[segments$group, !names(data) %in% </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     c("x", "y"), drop = FALSE])</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[9]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> if (normalize) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     data$x &lt;- rescale(data$x/asp.ratio, to = x_range, from = c(0, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         1))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     data$xend &lt;- rescale(data$xend/asp.ratio, to = x_range, from = c(0, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         1))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     data$y &lt;- rescale(data$y, to = y_range, from = c(0, 1))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     data$yend &lt;- rescale(data$yend, to = y_range, from = c(0, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         1))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[10]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> data</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggforce.data-imaginist.com" class="external-link">ggforce</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">ggbody</span><span class="op">(</span><span class="va">StatBezier</span><span class="op">$</span><span class="va">compute_panel</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> `{`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[2]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> if (empty_data(data)) return(data)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[3]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> nControls &lt;- table(data$group)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[4]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> controlRange &lt;- range(nControls)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[5]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> if (min(controlRange) &lt; 3 || max(controlRange) &gt; 4) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     cli::cli_abort(c("Only support for quadratic and cubic beziers", </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         i = "Make sure each group consists of 3 or 4 rows"))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[6]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> data &lt;- data[order(data$group), ]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[7]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> groups &lt;- unique0(data$group)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[8]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> paths &lt;- getBeziers(data$x, data$y, match(data$group, groups), </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     n)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[9]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> paths &lt;- data_frame0(x = paths$paths[, 1], y = paths$paths[, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     2], group = groups[paths$pathID])</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[10]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> paths$index &lt;- rep(seq(0, 1, length.out = n), length(nControls))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[11]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> dataIndex &lt;- rep(match(unique0(data$group), data$group), each = n)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[12]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> cbind(paths, data[dataIndex, !names(data) %in% c("x", "y", "group"), </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     drop = FALSE])</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># `inherit = TRUE` will return the method from the closest parent</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ERRORS:</span></span></span>
<span class="r-in"><span><span class="co">## get_method(StatBoxplot$compute_panel)</span></span></span>
<span class="r-in"><span><span class="co">## ggbody(StatBoxplot$compute_panel)</span></span></span>
<span class="r-in"><span><span class="co">## ggformals(StatBoxplot$compute_panel)</span></span></span>
<span class="r-in"><span><span class="fu">ggbody</span><span class="op">(</span><span class="va">StatBoxplot</span><span class="op">$</span><span class="va">compute_panel</span>, inherit <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Method inherited from `Stat$compute_panel`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> `{`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[2]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> if (empty(data)) return(data_frame0())</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[3]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> groups &lt;- split(data, data$group)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[4]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> stats &lt;- lapply(groups, function(group) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     self$compute_group(data = group, scales = scales, ...)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> })</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[5]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> non_constant_columns &lt;- character(0)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[6]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> stats &lt;- mapply(function(new, old) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     if (empty(new)) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         return(data_frame0())</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     old &lt;- old[, !(names(old) %in% names(new)), drop = FALSE]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     non_constant &lt;- vapply(old, vec_unique_count, integer(1)) &gt; </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         1L</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     non_constant_columns &lt;&lt;- c(non_constant_columns, names(old)[non_constant])</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     vec_cbind(new, old[rep(1, nrow(new)), , drop = FALSE])</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> }, stats, groups, SIMPLIFY = FALSE)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[7]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> non_constant_columns &lt;- unique0(non_constant_columns)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[8]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> dropped &lt;- non_constant_columns[!non_constant_columns %in% self$dropped_aes]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[9]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> if (length(dropped) &gt; 0) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     cli::cli_warn(c("The following aesthetics were dropped during statistical transformation: {.field {dropped}}.", </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         i = "This can happen when ggplot fails to infer the correct grouping structure in the data.", </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         i = "Did you forget to specify a {.code group} aesthetic or to convert a numerical variable into a factor?"))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[10]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> data_new &lt;- vec_rbind0(!!!stats)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[11]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> data_new[, !names(data_new) %in% non_constant_columns, drop = FALSE]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="fu">ggbody</span><span class="op">(</span><span class="va">Stat</span><span class="op">$</span><span class="va">compute_panel</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> `{`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[2]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> if (empty(data)) return(data_frame0())</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[3]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> groups &lt;- split(data, data$group)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[4]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> stats &lt;- lapply(groups, function(group) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     self$compute_group(data = group, scales = scales, ...)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> })</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[5]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> non_constant_columns &lt;- character(0)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[6]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> stats &lt;- mapply(function(new, old) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     if (empty(new)) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         return(data_frame0())</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     old &lt;- old[, !(names(old) %in% names(new)), drop = FALSE]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     non_constant &lt;- vapply(old, vec_unique_count, integer(1)) &gt; </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         1L</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     non_constant_columns &lt;&lt;- c(non_constant_columns, names(old)[non_constant])</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     vec_cbind(new, old[rep(1, nrow(new)), , drop = FALSE])</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> }, stats, groups, SIMPLIFY = FALSE)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[7]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> non_constant_columns &lt;- unique0(non_constant_columns)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[8]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> dropped &lt;- non_constant_columns[!non_constant_columns %in% self$dropped_aes]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[9]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> if (length(dropped) &gt; 0) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     cli::cli_warn(c("The following aesthetics were dropped during statistical transformation: {.field {dropped}}.", </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         i = "This can happen when ggplot fails to infer the correct grouping structure in the data.", </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         i = "Did you forget to specify a {.code group} aesthetic or to convert a numerical variable into a factor?"))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[10]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> data_new &lt;- vec_rbind0(!!!stats)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[11]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> data_new[, !names(data_new) %in% non_constant_columns, drop = FALSE]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Navigating complex inheritance</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">GeomArcBar</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "GeomArcBar"  "GeomShape"   "GeomPolygon" "Geom"        "ggproto"    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [6] "gg"         </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/invisible.html" class="external-link">invisible</a></span><span class="op">(</span><span class="fu">ggbody</span><span class="op">(</span><span class="va">GeomArcBar</span><span class="op">$</span><span class="va">default_aes</span>, inherit <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="co"># self</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Method 'default_aes' is defined for `GeomArcBar`, not inherited.</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/invisible.html" class="external-link">invisible</a></span><span class="op">(</span><span class="fu">ggbody</span><span class="op">(</span><span class="va">GeomArcBar</span><span class="op">$</span><span class="va">draw_panel</span>, inherit <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>  <span class="co"># parent</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Method inherited from `GeomShape$draw_panel`</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/invisible.html" class="external-link">invisible</a></span><span class="op">(</span><span class="fu">ggbody</span><span class="op">(</span><span class="va">GeomArcBar</span><span class="op">$</span><span class="va">draw_key</span>, inherit <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>    <span class="co"># grandparent</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Method inherited from `GeomPolygon$draw_key`</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/invisible.html" class="external-link">invisible</a></span><span class="op">(</span><span class="fu">ggbody</span><span class="op">(</span><span class="va">GeomArcBar</span><span class="op">$</span><span class="va">draw_group</span>, inherit <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>  <span class="co"># top-level</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Method inherited from `Geom$draw_group`</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Getting information about method inheritance all at once</span></span></span>
<span class="r-in"><span><span class="co"># - default `trim_overriden = TRUE` hides redundant methods defined in parent</span></span></span>
<span class="r-in"><span><span class="fu">get_method_inheritance</span><span class="op">(</span><span class="va">GeomArcBar</span>, trim_overriden <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $Geom</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "aesthetics"      "draw_group"      "draw_layer"      "draw_panel"     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [5] "extra_params"    "non_missing_aes" "optional_aes"    "parameters"     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9] "setup_data"      "setup_params"    "use_defaults"   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $GeomPolygon</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "default_aes"  "draw_key"     "handle_na"    "rename_size"  "required_aes"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $GeomShape</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "draw_panel"   "extra_params"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $GeomArcBar</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "default_aes"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Works for custom ggproto</span></span></span>
<span class="r-in"><span><span class="co"># - Example from {ggplot2} "Extending ggplot2" vignette</span></span></span>
<span class="r-in"><span><span class="va">StatDensityCommon</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggproto.html" class="external-link">ggproto</a></span><span class="op">(</span><span class="st">"StatDensityCommon"</span>, <span class="va">Stat</span>,</span></span>
<span class="r-in"><span>  required_aes <span class="op">=</span> <span class="st">"x"</span>,</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  setup_params <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">data</span>, <span class="va">params</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>    <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">params</span><span class="op">$</span><span class="va">bandwidth</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>      <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">params</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>    <span class="va">xs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/split.html" class="external-link">split</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">x</span>, <span class="va">data</span><span class="op">$</span><span class="va">group</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="va">bws</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">vapply</a></span><span class="op">(</span><span class="va">xs</span>, <span class="va">bw.nrd0</span>, <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="va">bw</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">bws</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"Picking bandwidth of "</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">signif</a></span><span class="op">(</span><span class="va">bw</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>    <span class="va">params</span><span class="op">$</span><span class="va">bandwidth</span> <span class="op">&lt;-</span> <span class="va">bw</span></span></span>
<span class="r-in"><span>    <span class="va">params</span></span></span>
<span class="r-in"><span>  <span class="op">}</span>,</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  compute_group <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">data</span>, <span class="va">scales</span>, <span class="va">bandwidth</span> <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>    <span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/density.html" class="external-link">density</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">x</span>, bw <span class="op">=</span> <span class="va">bandwidth</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">d</span><span class="op">$</span><span class="va">x</span>, y <span class="op">=</span> <span class="va">d</span><span class="op">$</span><span class="va">y</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">}</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">as.list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/body.html" class="external-link">body</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/get.html" class="external-link">get</a></span><span class="op">(</span><span class="st">"compute_group"</span>, <span class="va">StatDensityCommon</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> `{`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[2]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d &lt;- density(data$x, bw = bandwidth)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[3]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> data.frame(x = d$x, y = d$y)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">ggbody</span><span class="op">(</span><span class="va">StatDensityCommon</span><span class="op">$</span><span class="va">compute_group</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> `{`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[2]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d &lt;- density(data$x, bw = bandwidth)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[3]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> data.frame(x = d$x, y = d$y)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># As of v.0.4.0, ggbody works for functions as well</span></span></span>
<span class="r-in"><span><span class="fu">ggbody</span><span class="op">(</span><span class="va">sample</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> `{`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[2]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> if (length(x) == 1L &amp;&amp; is.numeric(x) &amp;&amp; is.finite(x) &amp;&amp; x &gt;= </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     1) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     if (missing(size)) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         size &lt;- x</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     sample.int(x, size, replace, prob)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> } else {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     if (missing(size)) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         size &lt;- length(x)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     x[sample.int(length(x), size, replace, prob)]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="fu"><a href="ggtrace.html">ggtrace</a></span><span class="op">(</span><span class="va">sample</span>, <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> `sample` now being traced.</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/invisible.html" class="external-link">invisible</a></span><span class="op">(</span><span class="fu">ggbody</span><span class="op">(</span><span class="va">sample</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>`sample` is currently being traced</span>
<span class="r-in"><span><span class="fu"><a href="is_traced.html">is_traced</a></span><span class="op">(</span><span class="va">sample</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span><span class="fu"><a href="gguntrace.html">gguntrace</a></span><span class="op">(</span><span class="va">sample</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> `sample` no longer being traced.</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://yjunechoe.github.io" class="external-link">June Choe</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer></div>





  </body></html>

